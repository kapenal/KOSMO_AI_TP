<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²€ìƒ‰ ê²°ê³¼</title>
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ search_textì„ ë°›ì•„ì„œ inputì— ë„£ì–´ì£¼ê¸°
        window.onload = function () {
            const urlParams = new URLSearchParams(window.location.search);
            const encodedMovieData = urlParams.get('search_movie');

            console.log("ğŸ“¦ ì¸ì½”ë”©ëœ ë°ì´í„°:", encodedMovieData);

            if (encodedMovieData) {
                try {
                    const movieData = JSON.parse(decodeURIComponent(encodedMovieData));

                    if (Array.isArray(movieData)) {
                        // ì˜í™” ë¦¬ìŠ¤íŠ¸ì¼ ê²½ìš° ì¶œë ¥
                        movieData.forEach(movie => {
                            console.log("ğŸ¬ ì œëª©:", movie.ì œëª©);
                            // HTMLì— ì¶œë ¥
                            document.getElementById('search_text').value = movie.ì œëª©;
                        });
                    } else if (movieData.message) {
                        // ì—ëŸ¬ ë©”ì‹œì§€ ì¶œë ¥
                        console.log("âŒ ë©”ì‹œì§€:", movieData.message);
                        document.getElementById("result").innerText = movieData.message;
                    } else {
                        console.log("âš ï¸ ì˜ˆìƒí•˜ì§€ ëª»í•œ ë°ì´í„° êµ¬ì¡°:", movieData);
                    }

                } catch (e) {
                    console.error("âŒ JSON íŒŒì‹± ì˜¤ë¥˜:", e);
                }
            } else {
                console.log("âš ï¸ search_movie íŒŒë¼ë¯¸í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
            }
        };

    </script>
</head>
<body>
    <h1>Search Result Page</h1>
    <form>
        <p>ê²€ìƒ‰ <input type="text" id="search_text"></p>
        <button id="search_btn">ê²€ìƒ‰</button>
    </form>
    <button id="detail_btn">ìƒì„¸ í˜ì´ì§€</button>
    <script src="../js/script.js"></script>
    <script src="../js/detail_page.js"></script>

    <!-- <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ search_urlì„ ë°›ì•„ì„œ ë¦¬ë‹¤ì´ë ‰íŠ¸
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const searchUrl = urlParams.get('search_url');
            
            if (searchUrl) {
                // search_urlì´ ì¡´ì¬í•˜ë©´ í•´ë‹¹ URLë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                window.location.href = searchUrl;
            } else {
                console.error("search_url íŒŒë¼ë¯¸í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
            }
        };
    </script> -->
</body>
</html>